package com.sportsinfo.notification; import org.springframework.http.MediaType; import org.springframework.web.bind.annotation.*; import org.springframework.web.servlet.mvc.method.annotation.SseEmitter; import java.io.IOException; import java.time.OffsetDateTime; @RestController @RequestMapping("/api/notifications") public class NotificationController { @GetMapping(path="/stream", produces=MediaType.TEXT_EVENT_STREAM_VALUE) public SseEmitter stream() throws IOException { SseEmitter e = new SseEmitter(0L); try{ e.send(SseEmitter.event().name("init").data("connected:"+OffsetDateTime.now())); } catch(IOException ex){ e.completeWithError(ex);} return e; } }
